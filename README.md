## Bayonet
Bayonet enables companies to feed and consult a global database about online consumers’ reputation, based on historic payments. Start making smarter business decisions today.

### Introduction
Bayonet’s API is organized around REST and exposes endpoints for HTTP requests. It is designed to have predictable, resource-oriented URLs and uses standard HTTP response codes to indicate the outcome of operations. Request and response payloads are formatted as JSON.

### About the service
Bayonet provides an Ecosystem of Trust and Protection where companies can colaborate with each other to combat online fraud together. We provide a secure platform to share and consult data to understand when a consumer is related to fraudulent activity or has a fraud-free record. Different technologies that run algorithms to link parameters seen in different transactions, fed by companies connected to the ecosystem are employed in order to build consumer profiles. By consulting Bayonet’s API, a response with data provided by companies themselves is available in real-time for your risk assesment process to analyze it and take better decisions.

### Bayonet's API details
The examples shown in this README are only for demonstration of the functionality of this SDK. For the detailed integration flow, and when to send which API call, please refer to the Bayonet [API documentation](https://bayonet.io/console/docs).

## Getting started
To use this SDK, please make sure:
  * You have Java 1.6 or superior installed on your system.
  * You have an API KEY (sandbox and/or live) generated on your Bayonet console.
    
## Usage
Once you have Bayonet's SDK configured, you can call the APIs with the following syntax (depending on whether you  are integrating for the Ecommerce product or the Lending product):

### Ecommerce

* Consulting API
  
    ```java
    import io.bayonet.clients.EcommerceClient;
    import io.bayonet.exceptions.BayonetException;
    import io.bayonet.model.base.Address;
    import io.bayonet.model.base.Product;
    import io.bayonet.model.ecommerce.EcommerceConsultingRequest;

    import java.util.ArrayList;
    import java.util.HashMap;

    /* Initialize the Ecommerce client with your Api key and Api version */
    EcommerceClient client = new EcommerceClient("<your api key>", "<api version>");
    
    /* Build the consulting request */
    EcommerceConsultingRequest params = new EcommerceConsultingRequest()
            .setEmail("example@bayonet.io")
            .setConsumerName("Example name")
            .setConsumerInternalId("<your internal ID for this consumer>")
            .setCardholderName("Example name")
            .setTelephone("1234567890")
            .setCardNumber("123456")
            .setTransactionAmount(100.00)
            .setCurrencyCode("MXN")
            .setPaymentMethod("card")
            .setTransactionTime(1506468823L)
            .setPaymentGateway("stripe")
            .setChannel("ecommerce")
            .setShippingAddress(
                new Address()
                    .setLine1("example line 1")
                    .setLine2("example line 2")
                    .setCity("Mexico City")
                    .setState("CDMX")
                    .setCountry("MEX")
                    .setZipCode("123")
            )
            .setBillingAddress(new Address()
                    .setLine1("example line 1")
                    .setLine2("example line 2")
                    .setCity("Mexico City")
                    .setState("CDMX")
                    .setCountry("MEX")
                    .setZipCode("123"))
            .setBayonetFingerprintToken("<token generated by Bayonet fingerprinting JS>");
            
    // Add product information - products that the consumer is buying on your store
    ArrayList<Product> products = new ArrayList<Product>();
            products.add(
                    new Product()
                    .setProductId("1")
                    .setProductName("product_1")
                    .setProductPrice(75.00)
                    .setProductCategory("example category")
            );
            products.add(
                    new Product()
                    .setProductId("2")
                    .setProductName("product_2")
                    .setProductPrice(25.00)
                    .setProductCategory("example category")
            );
    params.setProducts(products);
    
    /* Send consulting request */
    try {
        client.consulting(params);
        
        /* process the response */
        System.out.println(client.getHttpResponseCode());                   // 200
        System.out.println(client.getReasonCode());                         // 0
        System.out.println(client.getReasonMessage());                      // "success"
        
        // risk level of the consumer - use this to make decisions whether to accept the transaction or not
        System.out.println(client.getRiskLevel());
        // all the rules that were triggered by this consumer
        ArrayList<String> rules_triggered = client.getRulesTriggered();
        
        // get the feedback api trans code to send during the feedback call
        String feedback_api_trans_code = client.getFeedbackApiTransCode();
        
        HashMap<String, Object> payload = client.getResponsePayload();      // response payload as nested map
        
    } catch (BayonetException e) {
        System.out.println("error occurred");
        System.out.println("Reason code: " + e.getReasonCode());
        System.out.println("Reason message: " + e.getReasonMessage());
    }
    
    ```
* Feedback API
  
    ```java
    import io.bayonet.clients.EcommerceClient;
    import io.bayonet.exceptions.BayonetException;
    import io.bayonet.model.ecommerce.EcommerceFeedbackRequest;
    
    /* Initialize the Ecommerce client with your Api key and Api version */
    EcommerceClient client = new EcommerceClient("<your api key>", "<api version>");
    
    /* Build the feedback request */
    EcommerceFeedbackRequest params = new EcommerceFeedbackRequest()
            .setFeedbackApiTransCode(feedback_api_trans_code)               // the trans code that was previously returned by a consulting call
            .setTransactionId("<your internal transaction ID>")
            .setTransactionStatus("success")
            .setBankAuthCode("<auth code returned by the processing bank>");
    /* Send feedback request */
    try {
        client.feedback(params);
        
        /* process the response */
        System.out.println(client.getHttpResponseCode());                   // 200
        System.out.println(client.getReasonCode());                         // 0
        System.out.println(client.getReasonMessage());                      // "success"
        
    } catch (BayonetException e) {
        System.out.println("error occurred");
        System.out.println("Reason code: " + e.getReasonCode());
        System.out.println("Reason message: " + e.getReasonMessage());
    }
    
    ```
* Feedback-historical API
  
    ```java
    import io.bayonet.clients.EcommerceClient;
    import io.bayonet.exceptions.BayonetException;
    import io.bayonet.model.base.Address;
    import io.bayonet.model.base.Product;
    import io.bayonet.model.ecommerce.EcommerceFeedbackHistoricalRequest;

    import java.util.ArrayList;

    /* Initialize the Ecommerce client with your Api key and Api version */
    EcommerceClient client = new EcommerceClient("<your api key>", "<api version>");
    
    /* Build the feedback historical request */
    EcommerceFeedbackHistoricalRequest params = new EcommerceFeedbackHistoricalRequest()
            .setEmail("example@bayonet.io")
            .setConsumerName("Example name")
            .setConsumerInternalId("<your internal ID for this consumer>")
            .setCardholderName("Example name")
            .setTelephone("1234567890")
            .setCardNumber("123456")
            .setTransactionAmount(100.00)
            .setCurrencyCode("MXN")
            .setPaymentMethod("card")
            .setTransactionTime(1506468823L)
            .setPaymentGateway("stripe")
            .setChannel("ecommerce")
            .setShippingAddress(
                new Address()
                    .setLine1("example line 1")
                    .setLine2("example line 2")
                    .setCity("Mexico City")
                    .setState("CDMX")
                    .setCountry("MEX")
                    .setZipCode("123")
            )
            .setBillingAddress(new Address()
                    .setLine1("example line 1")
                    .setLine2("example line 2")
                    .setCity("Mexico City")
                    .setState("CDMX")
                    .setCountry("MEX")
                    .setZipCode("123"))
            .setBayonetFingerprintToken("<token generated by Bayonet fingerprinting JS>")
            .setTransactionId("<your internal transaction ID>")
            .setTransactionStatus("success")
            .setBankAuthCode("<auth code returned by the processing bank>");
            
    // Add product information - products that the consumer is buying on your store
    ArrayList<Product> products = new ArrayList<Product>();
            products.add(
                    new Product()
                    .setProductId("1")
                    .setProductName("product_1")
                    .setProductPrice(75.00)
                    .setProductCategory("example category")
            );
            products.add(
                    new Product()
                    .setProductId("2")
                    .setProductName("product_2")
                    .setProductPrice(25.00)
                    .setProductCategory("example category")
            );
    params.setProducts(products);
    
    /* Send feedback historical request */
    try {
        client.feedbackHistorical(params);
        
        /* process the response */
        System.out.println(client.getHttpResponseCode());                   // 200
        System.out.println(client.getReasonCode());                         // 0
        System.out.println(client.getReasonMessage());                      // "success"
        
    } catch (BayonetException e) {
        System.out.println("error occurred");
        System.out.println("Reason code: " + e.getReasonCode());
        System.out.println("Reason message: " + e.getReasonMessage());
    }
    
    ```
